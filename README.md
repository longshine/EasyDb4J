Easy Database Helper for JAVA
=============================

EasyDb4J is a simple yet functional database helper which helps
dealing with queries and object-relational mappings, with the
single interface <code>IConnection</code>. It has features like:

* 

0. Prelude
----------

In the very begining, build a <code>IConnectionFactory</code>
of your database to open connections. You may use a shortcut
method in <code>ConnectionFactoryBuilder</code> to build a
database-specific factory, i.e.:

``` java
IConnectionFactory factory = ConnectionFactoryBuilder.buildSQLite("test.db", "user", "pass");
```

Of course a corresponding JDBC driver should be included in the
classpath, otherwise you would get a <code>ClassNotFoundException</code>.

Once a connection factory is setted up, you can get a connection
by a single call:

``` java
IConnection conn = factory.openConnection();
```

1. SQL query
------------

SQL queries, with or without parameters, can be exeuted directly
in various **statement-free** approaches.

### executeQuery

Executes the SQL query and returns the <code>ResultSet</code>
object generated by the query.

``` java
ResultSet executeQuery(String sql, Object[] params = null);
ResultSet executeQuery(String sql, String[] paramNames = null, Object item = null);
```

Example usage:

``` java
class User {
  private int id;
  private String name;
  private String password;
  /* getters and setters are ommitted */
}

/* query all users without parameters */
ResultSet rs1 = conn.executeQuery("select * from user");

/* query user with id equals to 3 */
ResultSet rs2 = conn.executeQuery("select * from user where id = ?",
    new Object[] { new Integer(3) });

/* query user by name from a strong-typed object */
ResultSet rs3 = conn.executeQuery("select * from user where un = ?",
    new String[] { "name" }, new User("Jack"));
```

NOTE: in a strong-typed query, the parameter <code>item</code> is
taken as the source of parameters in the query. The arary of
<code>paramNames</code> are names of fields in the source item to read.
The <code>item</code> could also be a instance of a <code>Map</code>,
while <code>paramNames</code> are its keys.
The order of <code>paramNames</code>, as well as the <code>params</code>
in a none strong-typed query, should be **same** as the order of
their occurrence in the query.

### executeScalar

Executes an SQL statement and returns the first column of the first
row in the result set generated by the query.

``` java
Object executeScalar(String sql, Object[] params = null);
Object executeScalar(String sql, String[] paramNames = null, Object item = null);
```

Example usage:

``` java
Integer count = (Integer) conn.executeScalar("select count(*) from user");
```

### executeUpdate

Executes an SQL statement and returns the number of rows affected.

``` java
int executeUpdate(String sql, Object[] params = null);
int executeUpdate(String sql, String[] paramNames = null, Object item = null);
```

Example usage:

``` java
class User {
  private int id;
  private String name;
  private String password;
  /* getters and setters are ommitted */
}

conn.executeUpdate("insert into user (un, up) values (?, ?)",
    new Object[] { "user1", "pass1" });

conn.executeUpdate("insert into user (un, up) values (?, ?)",
    new String[] { "name", "password" },
    new User("user2", "pass2"));
```

TIPS: you may conveniently and efficiently execute a query multiple
times by passing the parameter <code>item</code> as an array or a
instance of a <code>Collection</code> like this:

``` java
List list = new ArrayList();
list.add(new User("user1", "pass1"));
list.add(new User("user2", "pass2"));

conn.executeUpdate("insert into user (un, up) values (?, ?)",
    new String[] { "name", "password" },
    list);
```

### query

Executes a query and returns a list of <code>Map</code>s,
containing pairs of fields and their values.
By default, the map item in the result is a case-insensitive
linked hash map.

``` java
List query(String sql, Object[] params = null);
List query(String sql, String[] paramNames = null, Object item = null);
```


Example usage:

``` java
List list = conn.query("select * from user");
Map userMap = (Map) list.get(0);
```



